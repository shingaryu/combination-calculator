(this["webpackJsonpcombination-calculator"]=this["webpackJsonpcombination-calculator"]||[]).push([[0],{202:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(31),c=n.n(o),l=(n(86),n(208)),i=n(10),s=n(11),u=n(15),m=n(13),h=n(16),f=n(204),v=n(205),g=n(206),d=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(f.a,{fluid:!0},a.a.createElement(v.a,null,a.a.createElement(g.a,null,a.a.createElement("h1",null,"New Search")))))}}]),t}(a.a.Component),p=n(72),E=function(e){var t={labels:e.labels,datasets:[{label:"Strength value",backgroundColor:"rgba(255,99,132,0.2)",borderColor:"rgba(255,99,132,1)",borderWidth:1,hoverBackgroundColor:"rgba(255,99,132,0.4)",hoverBorderColor:"rgba(255,99,132,1)",data:e.values}]};return a.a.createElement(a.a.Fragment,null,a.a.createElement(f.a,{fluid:!0,className:"mt-5"},a.a.createElement(v.a,null,a.a.createElement(g.a,null,a.a.createElement("h1",null,"Strength Values of Your Team"))),a.a.createElement(v.a,null,a.a.createElement(g.a,null,a.a.createElement("div",{style:{height:500}},a.a.createElement(p.a,{data:t,width:100,height:50,options:{maintainAspectRatio:!1}}))))))},w=n(207),k=n(209),b=function(e){function t(e){var n;if(Object(i.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).num=e.num,n.pokemonList=e.pokemonList,n.onChange=e.onChange,!n.num||n.num<1)throw new Error("Error: team length must be more than 0");for(var r=[],a=0;a<n.num;a++)r[a]={id:n.pokemonList[a].id,enabled:!0};return n.state={pokemonSlots:r},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"onInputChange",value:function(e,t){var n=this.state.pokemonSlots.concat();n[e].id=t.target.value,this.setState({pokemons:n}),this.onChange(this.state.pokemonSlots.filter((function(e){return e.enabled})).map((function(e){return e.id})))}},{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement(f.a,{fluid:!0},a.a.createElement(v.a,null,a.a.createElement(g.a,null,a.a.createElement(v.a,null,a.a.createElement(g.a,null,a.a.createElement("h1",null,"Your Team"))),a.a.createElement(v.a,null,a.a.createElement(g.a,null,a.a.createElement("div",null,this.state.pokemonSlots&&this.state.pokemonSlots.map((function(t,n){return a.a.createElement(w.a,{className:"mb-2",key:n},a.a.createElement(w.a.Prepend,null,a.a.createElement(w.a.Checkbox,null)),a.a.createElement(k.a,{as:"select",value:t.id,onChange:function(t){return e.onInputChange(n,t)}},e.pokemonList.map((function(e){return a.a.createElement("option",{key:e.id,value:e.id},e.name)}))))})))))))))}}]),t}(a.a.Component),y=n(79),S=n(9),x=n.n(S),P=n(23),T=n(74),O=n.n(T),N=n(75),R=n.n(N),j=n(76),C=n.n(j),I=n(33),M=n.n(I),V=function(){function e(){Object(i.a)(this,e),this.strengthRows=null,this.columns=null}return Object(s.a)(e,[{key:"loadMasterData",value:function(){var e=Object(P.a)(x.a.mark((function e(){var t,n,r,a=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Promise(function(){var e=Object(P.a)(x.a.mark((function e(t,n){var r,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get(O.a);case 3:r=e.sent,o=a.loadStrengthTable(r.data),a.strengthRows=o.strengthRows,a.columns=o.columns,console.log("strength table was successfully loaded"),t(),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(0),n(e.t0),new Error("Error: failed to get strength table data from URL");case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()),n=new Promise(function(){var e=Object(P.a)(x.a.mark((function e(t,n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get(R.a);case 3:r=e.sent,a.loadStrategyInfoToStrTable(r.data,a.strengthRows),console.log("strategy information was successfully loaded"),t(),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(0),n(e.t0),new Error("Error: failed to get strategy data from URL");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()),r=new Promise(function(){var e=Object(P.a)(x.a.mark((function e(t,n){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get(C.a);case 3:r=e.sent,a.loadUsageInfo(r.data,a.columns,a.strengthRows),console.log("usage information was successfully loaded"),t(),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(0),n(e.t0),new Error("Error: failed to get usage data from URL");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()),e.next=5,Promise.all([t,n,r]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadStrengthTable",value:function(e){var t=this,n=(e=e.replace("\r\n","\n")).split("\n"),r=n[0].split(",").slice(1).filter((function(e){return!t.isEmptyString(e)}));console.log("".concat(r.length," columns exist"));var a=[],o=0;return n.slice(1).forEach((function(e){if(e&&!e.split(",").every((function(e){return t.isEmptyString(e)}))){var n=e.split(","),c={};c.index=o++,c.name=n[0].trim();var l=n.slice(1).filter((function(e){return!t.isEmptyString(e)}));if(r.length!==l.length)throw new Error("error: the number of column is not same among all rows");c.originalVector=l.map((function(e){return parseFloat(e.trim())})),c.vector=l.map((function(e){return parseFloat(e.trim())})),a.push(c)}})),console.log("".concat(a.length," rows are loaded")),{columns:r,strengthRows:a}}},{key:"loadStrategyInfoToStrTable",value:function(e,t){var n=this;if((e=e.replace("\r\n","\n")).split("\n").slice(1).forEach((function(e){if(!e.split(",").every((function(e){return n.isEmptyString(e)}))){var r=e.split(",");if(r.length<3)throw new Error("error: invalid strategies records");var a=parseInt(r[0].trim()),o=r[1].trim(),c=r[2].trim(),l=r.length>3&&"Yes"===r[3].trim();if(a>t.length-1)throw new Error("error: index ".concat(a," is out of range of strength table"));var i=t[a];if(i.name!==o)throw new Error("error: species name ".concat(o," is not match with the row [").concat(a,"] of the strength table"));if(["Sweeper","Tank","Wall","Support"].indexOf(c)<0)throw new Error("error: invalid strategy type ".concat(c));i.strategyType=c,i.hasBoost=l}})),!t.find((function(e){return e.hasBoost})))throw new Error("error: no boost attacker is found");t.forEach((function(e){if(!e.strategyType)throw new Error("error: strategy type of pokemon ".concat(e.name," is not set"))}))}},{key:"loadUsageInfo",value:function(e,t,n){var r=this,a=(e=e.replace("\r\n","\n")).split("\n"),o=[],c=new Map;a.slice(1).forEach((function(e){if(e&&!e.split(",").every((function(e){return r.isEmptyString(e)}))){var t=e.split(",");if(t.length<2)throw new Error("error: invalid usage records");var n=t[0].trim(),a=parseFloat(t[1].trim());c.set(n,a),o.push({name:n,usage:a})}}));for(var l=[],i=function(e){if(void 0===c.get(t[e]))throw new Error("error: usage information for pokemon ".concat(t[e]," is not found"));var n=t.filter((function(n){return n===t[e]})).length;l[e]=c.get(t[e])/n},s=0;s<t.length;s++)i(s);n.forEach((function(e){for(var n=0;n<t.length;n++)e.vector[n]*=l[n]/100}))}},{key:"constructTeamByIngenMethod",value:function(e,t){var n=this,r=e[t];console.log("firstPoke: ".concat(r.name,"\n")),e=e.filter((function(e){return e.index!=r.index}));var a=this.compatibleTypes(r.strategyType),o=this.searchMinimumRow(r.vector,this.filterStrengthRows(a,e),(function(e,t){return n.cosineSimilarity(e,t)})).row;console.log("secondPoke: ".concat(o.name,"\n")),e=e.filter((function(e){return e.index!=o.index}));var c=this.addVector(r.vector,o.vector);console.log(JSON.stringify(c));for(var l=Number.MIN_SAFE_INTEGER,i=null,s=null,u=this.filterStrengthRows(a,e),m=0;m<u.length;m++)for(var h=m+1;h<u.length;h++){for(var f=[],v=[],g=0;g<c.length;g++)c[g]<0&&(f.push(u[m].vector[g]),v.push(u[h].vector[g]));var d=this.addVector(f,v),p=this.cosineSimilarity(f,v),E=Math.sqrt(1-p*p),w=this.dotProduct(d,d.map((function(e){return 1}))),k=w*E;console.log("".concat(u[m].name," + ").concat(u[h].name,": ").concat(k,"(").concat(w," * ").concat(E,")")),k>l&&(l=k,i=u[m],s=u[h])}console.log("thirdPoke: ".concat(i.name)),console.log("fourthPoke: ".concat(s.name,"\n")),e=(e=e.filter((function(e){return e.index!=i.index}))).filter((function(e){return e.index!=s.index}));var b=this.addVectors(r.vector,o.vector,i.vector,s.vector);console.log(JSON.stringify(b));for(var y=Number.MIN_SAFE_INTEGER,S=e.filter((function(e){return e.hasBoost})),x=null,P=0;P<S.length;P++){for(var T=[],O=0;O<b.length;O++)b[O]<0&&T.push(S[P].vector[O]);var N=this.dotProduct(T,T.map((function(e){return 1})));console.log("".concat(S[P].name,": ").concat(N)),N>y&&(y=N,x=S[P])}console.log("fifthPoke: ".concat(x.name,"\n")),e=e.filter((function(e){return e.index!=x.index}));var R=this.addVectors(r.vector,o.vector,i.vector,s.vector,x.vector);console.log(JSON.stringify(R));for(var j=-1,C=Number.MAX_VALUE,I=0;I<R.length;I++){var M=R[I];M<C&&(C=M,j=I)}console.log("weakest slot is ".concat(j,"(").concat(this.columns[j],"): ").concat(C));var V=this.searchMaximumRow(null,e,(function(e,t){return t[j]})).row;console.log("sixthPoke: ".concat(V.name,"\n")),console.log("".concat(r.name," (norm: ").concat(this.dotProduct(r.vector,r.vector.map((function(e){return 1}))),")")),console.log("".concat(o.name," (norm: ").concat(this.dotProduct(o.vector,o.vector.map((function(e){return 1}))),")")),console.log("".concat(i.name," (norm: ").concat(this.dotProduct(i.vector,i.vector.map((function(e){return 1}))),")")),console.log("".concat(s.name," (norm: ").concat(this.dotProduct(s.vector,s.vector.map((function(e){return 1}))),")")),console.log("".concat(x.name," (norm: ").concat(this.dotProduct(x.vector,x.vector.map((function(e){return 1}))),")")),console.log("".concat(V.name," (norm: ").concat(this.dotProduct(V.vector,V.vector.map((function(e){return 1}))),")"));var A=this.addVectors(r.vector,o.vector,i.vector,s.vector,x.vector,V.vector);console.log(JSON.stringify(A))}},{key:"searchMinimumRow",value:function(e,t,n){var r=Number.MAX_VALUE,a=null;return t.forEach((function(t){var o=n(e,t.vector);console.log("".concat(t.name,": ").concat(o)),o<r&&(r=o,a=t)})),{row:a,value:r}}},{key:"searchMaximumRow",value:function(e,t,n){return this.searchMinimumRow(e,t,(function(e,t){return-1*n(e,t)}))}},{key:"addVectors",value:function(){for(var e=arguments[0].length,t=0;t<arguments.length;t++)if(e!==arguments[t].length)throw new Error("the number of elements is not same");for(var n=[],r=0;r<e;r++){for(var a=0,o=0;o<arguments.length;o++)a+=arguments[o][r];n.push(a)}return n}},{key:"addVector",value:function(e,t){if(e.length!==t.length)throw new Error("the number of elements is not same");for(var n=[],r=0;r<e.length;r++)n.push(e[r]+t[r]);return n}},{key:"cosineSimilarity",value:function(e,t){return this.dotProduct(e,t)/(this.l2norm(e)*this.l2norm(t))}},{key:"dotProduct",value:function(e,t){if(e.length!==t.length)throw new Error("the number of elements is not same");for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}},{key:"l2norm",value:function(e){var t=0;return e.forEach((function(e){t+=e*e})),t=Math.sqrt(t)}},{key:"isEmptyString",value:function(e){return""===e||"\n"===e||"\r"===e}},{key:"compatibleTypes",value:function(e){var t=[];return"Sweeper"===e?t=["Sweeper","Tank"]:"Tank"===e?t=["Sweeper","Tank","Wall"]:"Wall"===e&&(t=["Tank","Wall"]),t}},{key:"filterStrengthRows",value:function(e,t){return t.filter((function(t){return e.indexOf(t.strategyType)>=0}))}},{key:"getAllTeamPokemonNames",value:function(){return this.strengthRows.map((function(e){return e.name}))}},{key:"getAllTargetPokemonNames",value:function(){return this.columns}},{key:"strValuesOfTeam",value:function(e){var t=this,n=e.map((function(e){var n=parseInt(e);if(!(0<=n&&n<=t.strengthRows.length-1))throw new Error("Error: pokemon index is out of the range");return t.strengthRows[n].vector}));return this.addVectors.apply(this,Object(y.a)(n))}}]),e}(),A=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).combinationService=new V,n.state={loading:!0,teamPokemonIndices:["4","12","2","7","0","23"]},n.combinationService.loadMasterData().then((function(e){var t=n.combinationService.getAllTeamPokemonNames().map((function(e,t){return{id:t.toString(),name:e}}));n.setState({loading:!1,strVectorColumns:n.combinationService.getAllTargetPokemonNames(),teamPokemonNameMap:t})}),(function(e){throw n.setState({loading:!1}),console.log(e),new Error("Error: failed to init combinationService")})),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"onChangeTeamPokemons",value:function(e){this.setState({teamPokemonIndices:e})}},{key:"render",value:function(){var e=this;if(this.state.loading)return a.a.createElement("span",null,"Loading...");var t=this.combinationService.strValuesOfTeam(this.state.teamPokemonIndices);return a.a.createElement(a.a.Fragment,null,a.a.createElement(f.a,{fluid:!0,className:"mt-5"},a.a.createElement(v.a,null,a.a.createElement(g.a,{md:3},a.a.createElement(b,{num:6,pokemonList:this.state.teamPokemonNameMap,onChange:function(t){return e.onChangeTeamPokemons(t)}})),a.a.createElement(g.a,{md:3},a.a.createElement(d,null)),a.a.createElement(g.a,{md:6},a.a.createElement(d,null))),a.a.createElement(v.a,null,a.a.createElement(g.a,null),a.a.createElement(g.a,null))),a.a.createElement(E,{labels:this.state.strVectorColumns,values:t}))}}]),t}(a.a.Component);var L=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(l.a,{bg:"light"},a.a.createElement(l.a.Brand,null,"Pok\xe9mon VGC Team Combination Calculator")),a.a.createElement(A,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(201);c.a.render(a.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},74:function(e,t,n){e.exports=n.p+"static/media/strength-table.d04147c7.csv"},75:function(e,t,n){e.exports=n.p+"static/media/strategies.b4b7486a.csv"},76:function(e,t,n){e.exports=n.p+"static/media/usage.706fcf81.csv"},81:function(e,t,n){e.exports=n(202)},86:function(e,t,n){}},[[81,1,2]]]);
//# sourceMappingURL=main.d75d6b9b.chunk.js.map