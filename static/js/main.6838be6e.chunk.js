(this["webpackJsonpcombination-calculator"]=this["webpackJsonpcombination-calculator"]||[]).push([[0],{185:function(e,t,n){e.exports=n.p+"static/media/usage.706fcf81.csv"},203:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(30),c=n.n(a),i=(n(86),n(209)),l=n(9),s=n(10),u=n(15),m=n(13),h=n(16),f=n(205),v=n(206),g=n(207),d=(o.a.Component,n(43)),p=n(44),k=n.n(p),E=function(e){var t={labels:e.labels,datasets:[{label:"Team strength value to each target Pokemon",backgroundColor:"rgba(255,99,132,0.2)",borderColor:"rgba(255,99,132,1)",borderWidth:1,hoverBackgroundColor:"rgba(255,99,132,0.4)",hoverBorderColor:"rgba(255,99,132,1)",data:e.values}]},n=[{ticks:{min:-4096,max:4096,stepSize:1024}}],r={maintainAspectRatio:!1,scales:{yAxes:n}},a={maintainAspectRatio:!1,scales:{xAxes:n}};return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{fluid:!0,className:"mt-5"},o.a.createElement(v.a,null,o.a.createElement(g.a,null,o.a.createElement("h2",null,"Your Team's Strength"))),o.a.createElement(v.a,null,o.a.createElement(g.a,null,o.a.createElement(k.a,{query:"(max-width: 767px)"},o.a.createElement("div",{style:{height:500}},o.a.createElement(d.b,{data:t,width:1e3,height:500,options:a}))),o.a.createElement(k.a,{query:"(min-width: 768px)"},o.a.createElement("div",{style:{height:500}},o.a.createElement(d.a,{data:t,width:100,height:50,options:r})))))))},w=n(208),y=n(210),b=function(e){function t(e){var n;if(Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).num=e.num,n.pokemonList=e.pokemonList,n.onChange=e.onChange,!n.num||n.num<1)throw new Error("Error: team length must be more than 0");for(var r=[],o=["18","11","23","25","2","21"],a=0;a<n.num;a++)r[a]={id:o[a],enabled:!0};return n.state={pokemonSlots:r},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"onCheckboxChange",value:function(e,t){var n=this.state.pokemonSlots.concat();n[e].enabled=t.target.checked,this.setState({pokemons:n}),this.onChange(this.validTeamPokemonIndices())}},{key:"onInputChange",value:function(e,t){var n=this.state.pokemonSlots.concat();n[e].id=t.target.value,this.setState({pokemons:n}),this.onChange(this.validTeamPokemonIndices())}},{key:"teamPokemonOptions",value:function(){var e=[];return e.push(o.a.createElement("option",{key:-1,value:-1}," ")),this.pokemonList.forEach((function(t){return e.push(o.a.createElement("option",{key:t.id,value:t.id},t.name))})),e}},{key:"validTeamPokemonIndices",value:function(){return this.state.pokemonSlots.filter((function(e){return e.enabled&&"-1"!==e.id})).map((function(e){return e.id}))}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{fluid:!0},o.a.createElement(v.a,null,o.a.createElement(g.a,null,o.a.createElement(v.a,null,o.a.createElement(g.a,null,o.a.createElement("h2",null,"Your Team"))),o.a.createElement(v.a,null,o.a.createElement(g.a,null,o.a.createElement("div",null,this.state.pokemonSlots&&this.state.pokemonSlots.map((function(t,n){return o.a.createElement(w.a,{className:"mb-2",key:n,style:{width:200}},o.a.createElement(w.a.Prepend,null,o.a.createElement(w.a.Checkbox,{checked:t.enabled,onChange:function(t){return e.onCheckboxChange(n,t)}})),o.a.createElement(y.a,{as:"select",value:t.id,onChange:function(t){return e.onInputChange(n,t)}},e.teamPokemonOptions()))})))))))))}}]),t}(o.a.Component),S=n(79),x=n(12),P=n.n(x),T=n(32),C=n(75),O=n.n(C),N=n(76),R=n.n(N),I=(n(185),n(45)),M=n.n(I),j=function(){function e(){Object(l.a)(this,e),this.strengthRows=null,this.columns=null}return Object(s.a)(e,[{key:"loadMasterData",value:function(){var e=Object(T.a)(P.a.mark((function e(){var t,n,r=this;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Promise(function(){var e=Object(T.a)(P.a.mark((function e(t,n){var o,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get(O.a);case 3:o=e.sent,a=r.loadStrengthTable(o.data),r.strengthRows=a.strengthRows,r.columns=a.columns,console.log("strength table was successfully loaded"),t(),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(0),n(e.t0),new Error("Error: failed to get strength table data from URL");case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()),e.next=3,Promise.resolve(t);case 3:return n=new Promise(function(){var e=Object(T.a)(P.a.mark((function e(t,n){var o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.a.get(R.a);case 3:o=e.sent,r.loadStrategyInfoToStrTable(o.data,r.strengthRows),console.log("strategy information was successfully loaded"),t(),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(0),n(e.t0),new Error("Error: failed to get strategy data from URL");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()),e.next=6,Promise.all([n]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadStrengthTable",value:function(e){var t=this,n=(e=e.replace("\r\n","\n")).split("\n"),r=n[0].split(",").slice(1).filter((function(e){return!t.isEmptyString(e)}));console.log("".concat(r.length," columns exist"));var o=[],a=0;return n.slice(1).forEach((function(e){if(e&&!e.split(",").every((function(e){return t.isEmptyString(e)}))){var n=e.split(","),c={};c.index=a++,c.name=n[0].trim();var i=n.slice(1).filter((function(e){return!t.isEmptyString(e)}));if(r.length!==i.length)throw new Error("error: the number of column is not same among all rows");c.originalVector=i.map((function(e){return parseFloat(e.trim())})),c.vector=i.map((function(e){return parseFloat(e.trim())})),o.push(c)}})),console.log("".concat(o.length," rows are loaded")),{columns:r,strengthRows:o}}},{key:"loadStrategyInfoToStrTable",value:function(e,t){var n=this;if((e=e.replace("\r\n","\n")).split("\n").slice(1).forEach((function(e){if(!e.split(",").every((function(e){return n.isEmptyString(e)}))){var r=e.split(",");if(r.length<3)throw new Error("error: invalid strategies records");var o=parseInt(r[0].trim()),a=r[1].trim(),c=r[2].trim(),i=r.length>3&&"Yes"===r[3].trim();if(o>t.length-1)throw new Error("error: index ".concat(o," is out of range of strength table"));var l=t[o];if(l.name!==a)throw new Error("error: species name ".concat(a," is not match with the row [").concat(o,"] of the strength table"));if(["Sweeper","Tank","Wall","Support"].indexOf(c)<0)throw new Error("error: invalid strategy type ".concat(c));l.strategyType=c,l.hasBoost=i}})),!t.find((function(e){return e.hasBoost})))throw new Error("error: no boost attacker is found");t.forEach((function(e){if(!e.strategyType)throw new Error("error: strategy type of pokemon ".concat(e.name," is not set"))}))}},{key:"loadUsageInfo",value:function(e,t,n){var r=this,o=(e=e.replace("\r\n","\n")).split("\n"),a=[],c=new Map;o.slice(1).forEach((function(e){if(e&&!e.split(",").every((function(e){return r.isEmptyString(e)}))){var t=e.split(",");if(t.length<2)throw new Error("error: invalid usage records");var n=t[0].trim(),o=parseFloat(t[1].trim());c.set(n,o),a.push({name:n,usage:o})}}));for(var i=[],l=function(e){if(void 0===c.get(t[e]))throw new Error("error: usage information for pokemon ".concat(t[e]," is not found"));var n=t.filter((function(n){return n===t[e]})).length;i[e]=c.get(t[e])/n},s=0;s<t.length;s++)l(s);n.forEach((function(e){for(var n=0;n<t.length;n++)e.vector[n]*=i[n]/100}))}},{key:"constructTeamByIngenMethod",value:function(e,t){var n=this,r=e[t];console.log("firstPoke: ".concat(r.name,"\n")),e=e.filter((function(e){return e.index!=r.index}));var o=this.compatibleTypes(r.strategyType),a=this.searchMinimumRow(r.vector,this.filterStrengthRows(o,e),(function(e,t){return n.cosineSimilarity(e,t)})).row;console.log("secondPoke: ".concat(a.name,"\n")),e=e.filter((function(e){return e.index!=a.index}));var c=this.addVector(r.vector,a.vector);console.log(JSON.stringify(c));for(var i=Number.MIN_SAFE_INTEGER,l=null,s=null,u=this.filterStrengthRows(o,e),m=0;m<u.length;m++)for(var h=m+1;h<u.length;h++){for(var f=[],v=[],g=0;g<c.length;g++)c[g]<0&&(f.push(u[m].vector[g]),v.push(u[h].vector[g]));var d=this.addVector(f,v),p=this.cosineSimilarity(f,v),k=Math.sqrt(1-p*p),E=this.dotProduct(d,d.map((function(e){return 1}))),w=E*k;console.log("".concat(u[m].name," + ").concat(u[h].name,": ").concat(w,"(").concat(E," * ").concat(k,")")),w>i&&(i=w,l=u[m],s=u[h])}console.log("thirdPoke: ".concat(l.name)),console.log("fourthPoke: ".concat(s.name,"\n")),e=(e=e.filter((function(e){return e.index!=l.index}))).filter((function(e){return e.index!=s.index}));var y=this.addVectors(r.vector,a.vector,l.vector,s.vector);console.log(JSON.stringify(y));for(var b=Number.MIN_SAFE_INTEGER,S=e.filter((function(e){return e.hasBoost})),x=null,P=0;P<S.length;P++){for(var T=[],C=0;C<y.length;C++)y[C]<0&&T.push(S[P].vector[C]);var O=this.dotProduct(T,T.map((function(e){return 1})));console.log("".concat(S[P].name,": ").concat(O)),O>b&&(b=O,x=S[P])}console.log("fifthPoke: ".concat(x.name,"\n")),e=e.filter((function(e){return e.index!=x.index}));var N=this.addVectors(r.vector,a.vector,l.vector,s.vector,x.vector);console.log(JSON.stringify(N));for(var R=-1,I=Number.MAX_VALUE,M=0;M<N.length;M++){var j=N[M];j<I&&(I=j,R=M)}console.log("weakest slot is ".concat(R,"(").concat(this.columns[R],"): ").concat(I));var V=this.searchMaximumRow(null,e,(function(e,t){return t[R]})).row;console.log("sixthPoke: ".concat(V.name,"\n")),console.log("".concat(r.name," (norm: ").concat(this.dotProduct(r.vector,r.vector.map((function(e){return 1}))),")")),console.log("".concat(a.name," (norm: ").concat(this.dotProduct(a.vector,a.vector.map((function(e){return 1}))),")")),console.log("".concat(l.name," (norm: ").concat(this.dotProduct(l.vector,l.vector.map((function(e){return 1}))),")")),console.log("".concat(s.name," (norm: ").concat(this.dotProduct(s.vector,s.vector.map((function(e){return 1}))),")")),console.log("".concat(x.name," (norm: ").concat(this.dotProduct(x.vector,x.vector.map((function(e){return 1}))),")")),console.log("".concat(V.name," (norm: ").concat(this.dotProduct(V.vector,V.vector.map((function(e){return 1}))),")"));var A=this.addVectors(r.vector,a.vector,l.vector,s.vector,x.vector,V.vector);console.log(JSON.stringify(A))}},{key:"searchMinimumRow",value:function(e,t,n){var r=Number.MAX_VALUE,o=null;return t.forEach((function(t){var a=n(e,t.vector);console.log("".concat(t.name,": ").concat(a)),a<r&&(r=a,o=t)})),{row:o,value:r}}},{key:"searchMaximumRow",value:function(e,t,n){return this.searchMinimumRow(e,t,(function(e,t){return-1*n(e,t)}))}},{key:"addVectors",value:function(){for(var e=arguments[0].length,t=0;t<arguments.length;t++)if(e!==arguments[t].length)throw new Error("the number of elements is not same");for(var n=[],r=0;r<e;r++){for(var o=0,a=0;a<arguments.length;a++)o+=arguments[a][r];n.push(o)}return n}},{key:"addVector",value:function(e,t){if(e.length!==t.length)throw new Error("the number of elements is not same");for(var n=[],r=0;r<e.length;r++)n.push(e[r]+t[r]);return n}},{key:"cosineSimilarity",value:function(e,t){return this.dotProduct(e,t)/(this.l2norm(e)*this.l2norm(t))}},{key:"dotProduct",value:function(e,t){if(e.length!==t.length)throw new Error("the number of elements is not same");for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}},{key:"l2norm",value:function(e){var t=0;return e.forEach((function(e){t+=e*e})),t=Math.sqrt(t)}},{key:"isEmptyString",value:function(e){return""===e||"\n"===e||"\r"===e}},{key:"compatibleTypes",value:function(e){var t=[];return"Sweeper"===e?t=["Sweeper","Tank"]:"Tank"===e?t=["Sweeper","Tank","Wall"]:"Wall"===e&&(t=["Tank","Wall"]),t}},{key:"filterStrengthRows",value:function(e,t){return t.filter((function(t){return e.indexOf(t.strategyType)>=0}))}},{key:"getAllTeamPokemonNames",value:function(){return this.strengthRows.map((function(e){return e.name}))}},{key:"getAllTargetPokemonNames",value:function(){return this.columns}},{key:"strValuesOfTeam",value:function(e){var t=this;if(!e||0===e.length){for(var n=[],r=0;r<this.columns;r++)n.push(0);return n}var o=e.map((function(e){var n=parseInt(e);if(!(0<=n&&n<=t.strengthRows.length-1))throw new Error("Error: pokemon index is out of the range");return t.strengthRows[n].vector}));return this.addVectors.apply(this,Object(S.a)(o))}}]),e}(),V=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).combinationService=new j,n.state={loading:!0,teamPokemonIndices:["18","11","23","25","2","21"]},n.combinationService.loadMasterData().then((function(e){var t=n.combinationService.getAllTeamPokemonNames().map((function(e,t){return{id:t.toString(),name:e}}));n.setState({loading:!1,strVectorColumns:n.combinationService.getAllTargetPokemonNames(),teamPokemonNameMap:t})}),(function(e){throw n.setState({loading:!1}),console.log(e),new Error("Error: failed to init combinationService")})),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"onChangeTeamPokemons",value:function(e){this.setState({teamPokemonIndices:e})}},{key:"render",value:function(){var e=this;if(this.state.loading)return o.a.createElement("span",null,"Loading...");var t=this.combinationService.strValuesOfTeam(this.state.teamPokemonIndices);return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{fluid:!0,className:"mt-3"},o.a.createElement(v.a,null,o.a.createElement(g.a,{md:3},o.a.createElement(b,{num:6,pokemonList:this.state.teamPokemonNameMap,onChange:function(t){return e.onChangeTeamPokemons(t)}}))),o.a.createElement(v.a,null,o.a.createElement(g.a,null),o.a.createElement(g.a,null))),o.a.createElement(E,{labels:this.state.strVectorColumns,values:t}))}}]),t}(o.a.Component);var A=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(i.a,{bg:"light"},o.a.createElement(i.a.Brand,null,"Pok\xe9mon VGC Team Combination Calculator")),o.a.createElement(V,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(202);c.a.render(o.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},75:function(e,t,n){e.exports=n.p+"static/media/strength-table.d04147c7.csv"},76:function(e,t,n){e.exports=n.p+"static/media/strategies.b4b7486a.csv"},81:function(e,t,n){e.exports=n(203)},86:function(e,t,n){}},[[81,1,2]]]);
//# sourceMappingURL=main.6838be6e.chunk.js.map